# 📊 策略分析系統 - 技術指標算法完整說明

## 🎯 系統概述
本策略分析系統整合了多種經典技術分析指標，透過綜合評估提供投資決策參考。系統會自動從台灣證券交易所取得6個月的歷史數據進行計算。

---

## 📈 技術指標算法詳解

### 1. **移動平均線 (Moving Average, MA)**
**計算公式：** MA(n) = (P1 + P2 + ... + Pn) / n

**參數設定：**
- MA5：5日移動平均線
- MA10：10日移動平均線  
- MA20：20日移動平均線
- MA60：60日移動平均線

**用途說明：**
- **趨勢判斷**：價格在均線之上為多頭，之下為空頭
- **支撐阻力**：均線常作為動態支撐或阻力位
- **黃金/死亡交叉**：短期均線突破長期均線的訊號

---

### 2. **指數移動平均線 (Exponential Moving Average, EMA)**
**計算公式：** 
- 平滑係數 α = 2/(n+1)
- EMA(今日) = α × 今日收盤價 + (1-α) × EMA(昨日)

**參數設定：**
- EMA12：12日指數移動平均線
- EMA26：26日指數移動平均線

**用途說明：**
- **反應靈敏**：比簡單移動平均線更快反應價格變化
- **MACD基礎**：作為MACD指標的計算基礎
- **趨勢確認**：EMA12 > EMA26 表示短期趨勢向上

---

### 3. **相對強弱指標 (Relative Strength Index, RSI)**
**計算公式：**
- RS = 平均漲幅 / 平均跌幅
- RSI = 100 - (100 / (1 + RS))

**參數設定：** 14日週期

**判斷標準：**
- **超買區**：RSI > 70，可能面臨回檔
- **超賣區**：RSI < 30，可能出現反彈
- **中性區**：30 ≤ RSI ≤ 70，正常波動範圍

**用途說明：**
- **動能分析**：衡量價格變動的強度
- **轉折預警**：極值區域常出現趨勢轉折
- **背離訊號**：價格與RSI走勢背離時的警示

---

### 4. **MACD指標 (Moving Average Convergence Divergence)**
**計算公式：**
- DIF線 = EMA12 - EMA26
- MACD線(訊號線) = DIF的9日EMA
- OSC柱狀圖 = DIF - MACD

**參數設定：** (12, 26, 9)

**訊號判斷：**
- **黃金交叉**：DIF向上突破MACD線，買進訊號
- **死亡交叉**：DIF向下跌破MACD線，賣出訊號
- **零軸判斷**：DIF在零軸上方為多頭，下方為空頭

**用途說明：**
- **趨勢確認**：判斷中長期趨勢方向
- **動能分析**：OSC柱狀圖反映買賣動能強弱
- **交叉訊號**：提供明確的買賣時點參考

---

### 5. **布林通道 (Bollinger Bands)**
**計算公式：**
- 中軌 = 20日移動平均線
- 上軌 = 中軌 + (2 × 標準差)
- 下軌 = 中軌 - (2 × 標準差)
- 通道位置 = (收盤價 - 下軌) / (上軌 - 下軌)

**參數設定：** 20日週期，2倍標準差

**判斷標準：**
- **接近上軌**：位置 > 80%，可能遇阻力
- **接近下軌**：位置 < 20%，可能獲支撐
- **通道寬度**：反映市場波動程度

**用途說明：**
- **波動分析**：衡量價格波動範圍
- **超買超賣**：價格觸及通道邊界的訊號
- **突破預警**：通道收縮後常有大幅波動

---

### 6. **KD隨機指標 (Stochastic Oscillator)**
**計算公式：**
- RSV = (收盤價 - 最低價) / (最高價 - 最低價) × 100
- K值 = (2/3 × 前K值) + (1/3 × RSV)
- D值 = (2/3 × 前D值) + (1/3 × K值)

**參數設定：** (9, 3, 3)

**判斷標準：**
- **超買區**：K值或D值 > 80
- **超賣區**：K值或D值 < 20
- **黃金交叉**：K線向上突破D線
- **死亡交叉**：K線向下跌破D線

**用途說明：**
- **短期動能**：反映短期價格動能變化
- **轉折訊號**：在極值區域提供轉折預警
- **交叉確認**：KD交叉提供買賣時點參考

---

### 7. **成交量分析 (Volume Analysis)**
**計算指標：**
- VMA5：5日平均成交量
- VMA20：20日平均成交量
- 量比 = 當日成交量 / 平均成交量

**量價關係分析：**
- **價漲量增**：健康的上漲格局
- **價漲量縮**：上漲動能不足
- **價跌量增**：可能恐慌性賣壓
- **價跌量縮**：賣壓減輕，可能止跌

**判斷標準：**
- **放量**：量比 > 1.5倍
- **縮量**：量比 < 0.7倍
- **爆量**：量比 > 2.0倍

**用途說明：**
- **確認趨勢**：成交量確認價格走勢的可靠性
- **動能分析**：量能變化反映市場參與度
- **轉折預警**：異常量能常預示趨勢轉折

---

## 🔍 綜合分析算法

### 8. **趨勢分析 (Trend Analysis)**
**分析維度：**
- **均線排列**：多頭排列(MA5>MA10>MA20>MA60)或空頭排列
- **布林通道位置**：價格在通道中的相對位置
- **EMA關係**：EMA12與EMA26的相對強弱

### 9. **動能分析 (Momentum Analysis)**
**評估指標：**
- **RSI狀態**：超買/超賣/中性
- **KD狀態**：超買/超賣/中性
- **MACD動能**：多頭/空頭排列

### 10. **波動性分析 (Volatility Analysis)**
**計算方法：**
- 計算近20日的日報酬率
- 計算報酬率標準差
- 年化波動率 = 標準差 × √252

**分類標準：**
- **高波動**：年化波動率 > 30%
- **中波動**：20% < 年化波動率 ≤ 30%
- **低波動**：年化波動率 ≤ 20%

### 11. **風險評估算法 (Risk Assessment)**
**評分機制：**
- RSI極值：+1~2分
- 高波動性：+1~2分
- 布林通道極值：+1分

**風險等級：**
- **高風險**：總分 ≥ 4分
- **中風險**：2 ≤ 總分 < 4分
- **低風險**：總分 < 2分

### 12. **綜合評分算法 (Overall Scoring)**
**評分基準：** 基準分5分，根據各指標調整

**加減分規則：**
- MA趨勢：±1分
- RSI狀態：-1~+2分
- MACD狀態：±1分
- 成交量：+0.5分

**最終評分：** 1~10分制

---

## 🎯 交易信號生成

### 13. **信號強度分級**
- **強訊號**：MA黃金/死亡交叉
- **中訊號**：MACD交叉、RSI極值反轉
- **弱訊號**：單一指標提示

### 14. **多重確認機制**
系統會綜合多個指標的訊號，避免單一指標的假訊號，提供更可靠的投資建議。

---

## 📊 數據來源與更新
- **數據來源**：台灣證券交易所官方API
- **更新頻率**：即時查詢最新6個月數據
- **計算精度**：使用高精度數學運算，避免浮點數誤差

---

## 🔧 技術實現細節

### 精確數學運算
為避免JavaScript浮點數運算誤差，系統實現了以下精確運算函數：
- `preciseAdd()` - 精確加法
- `preciseSubtract()` - 精確減法
- `preciseMultiply()` - 精確乘法
- `preciseDivide()` - 精確除法
- `preciseRound()` - 精確四捨五入

### 數據處理流程
1. **數據獲取**：從台證所API獲取6個月歷史數據
2. **數據清理**：過濾無效數據，按日期排序
3. **指標計算**：依序計算各項技術指標
4. **綜合分析**：整合所有指標進行綜合評估
5. **結果輸出**：生成分析報告和投資建議

### 算法優化
- **滑動窗口**：使用滑動窗口技術提高計算效率
- **增量計算**：對於移動平均等指標使用增量計算
- **記憶體管理**：適當的數據結構減少記憶體使用

---

## 📱 前端顯示功能

### 動態更新機制
- **即時計算**：用戶輸入股票代號後即時計算所有指標
- **狀態顯示**：為null值顯示"計算中"狀態
- **格式化顯示**：數值格式化、千分位分隔、單位轉換

### 視覺化元素
- **顏色編碼**：多頭(綠色)、空頭(紅色)、中性(灰色)
- **狀態圖示**：超買超賣、放量縮量等狀態圖示
- **進度指示**：綜合評分的圓形進度條

---

## ⚠️ 使用注意事項
1. **技術分析限制**：僅基於歷史價格數據，無法預測突發事件
2. **多重確認**：建議搭配基本面分析和市場消息
3. **風險控制**：任何投資都有風險，請謹慎評估個人風險承受能力
4. **參考性質**：本系統提供的建議僅供參考，不構成投資建議
5. **數據延遲**：台證所數據可能有延遲，請以官方數據為準

---

## 📚 參考資料
- 台灣證券交易所技術分析手冊
- Technical Analysis of the Financial Markets - John J. Murphy
- 證券分析理論與實務

---

*本文件詳細說明了策略分析系統中使用的所有技術指標算法，幫助用戶理解每個指標的計算方式和應用場景。系統整合了14種不同的技術分析算法，從基礎的移動平均線到複雜的綜合評分機制，提供全方位的股票技術分析功能。*

**文件版本：** v1.0  
**最後更新：** 2025年7月  
**適用系統：** 股票策略分析系統